<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purpose & Perspective - Fidel's Reflections</title>
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
    <%- include("partials/header") %>
    
        <a class="compose-button compose-link " href="/compose">New Reflection</a>
        <% if (posts.length === 0) { %>
            <p>No reflections yet!</p> <a class="compose-button" href="/compose">Share your first thought</a>
        <% } else { %>
            <% posts.forEach(function(post) { %>
            <div class="post-card">
                <% if (post.featuredImage) { %>
                    <div class="post-image">
                        <img src="<%= post.featuredImage %>" alt="<%= post.title %>" onerror="this.style.display='none'">
                    </div>
                <% } %>
                
                <div class="post-content">
                    <% if (post.category) { %>
                        <span class="category-badge"><%= post.category %></span>
                    <% } %>
                    
                    <a href="/posts/<%= post._id %>"><h2><%= post.title %></h2></a>
                    <p class="post-preview"><%= post.body.substring(0, 150) %>...</p>
                    
                    <div class="post-meta">
                        <small>ðŸ“… <%= new Date(post.createdAt).toLocaleDateString('en-US', { 
                            year: 'numeric', 
                            month: 'long', 
                            day: 'numeric' 
                        }) %></small>
                    </div>
                </div>
            </div>
            <% }); %>
        <% } %>

   





 <%- include("partials/footer") %>


</body>
</html>